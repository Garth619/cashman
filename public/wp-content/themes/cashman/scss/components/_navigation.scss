nav {
	background: $greytwo;
	padding: 50px 0px;
	overflow-y: scroll;
	-webkit-overflow-scrolling: touch;
	transform: translateY(-35px);
	opacity: 0;
	visibility: hidden;
	transition: opacity 200ms ease-in-out, visibility 200ms ease-in-out,
		transform 900ms cubic-bezier(0.17, 0.66, 0.34, 0.98);
	@include box(100%, 100vh);
	@include abs(131px, null, null, 0, -1);
	@include mq(small_tablet) {
		top: 82px;
		transform: translateY(-15px);
	}
	@include mq(small_laptop) {
		opacity: 1;
		visibility: visible;
		overflow-y: visible;
		transform: translateY(0);
		background: transparent;
		position: relative;
		padding: 0;
		top: 0;
		z-index: 1;
		@include box(auto, auto);
	}
	ul {
		li {
			list-style: none;
			display: block;
			position: relative;
			@include type(
				(
					height: 22px,
					family: $primaryfont,
					color: $white,
					align: center,
				)
			);
			@include mq(small_laptop) {
				text-align: left;
			}
			&.menu-item-has-children {
				&.active,
				&:hover {
					> a {
						color: $brownlight;
						@include mq(small_laptop) {
							color: $browndark;
						}
						&::after {
							@include contentdisplay(inline-block, "-");
						}
					}
					> ul.sub-menu {
						@include mq(small_laptop) {
							opacity: 1;
							visibility: visible;
						}
					}
				}
				> a {
					&::after {
						vertical-align: top;
						margin: 1px 0 0 4px;
						@include box(9px, 22px);
						@include contentdisplay(inline-block, "+");
					}
				}
			}
			&.current-menu-item,
			&.current-menu-ancestor {
				> a {
					color: $brownlight;
					@include mq(small_laptop) {
						color: $browndark;
					}
				}
			}
			a {
				cursor: pointer;
				text-decoration: none;
				color: $white;
				display: block;
				display: inline-block;
				transition: all 200ms ease-in-out;
				@include mq(small_laptop) {
					color: $greythree;
				}
				&:hover {
					color: $brownlight;
					@include mq(small_laptop) {
						color: $browndark;
					}
				}
			}
		}
	}
}

body.ilawyer-menu-open {
	nav {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}
}

body.mobile-header-change {
	nav {
		@include fixed(63px, null, null, 0, -1);
	}
}

nav {
	ul.menu {
		padding-bottom: 100px;
		@include mq(small_laptop) {
			padding-bottom: 0px;
			@include flex(flex-end);
		}
		> li {
			font-size: 18px;
			font-weight: 700;
			text-transform: lowercase;
			@include mq(small_laptop) {
				font-size: 16px;
				margin-left: 2.8%;
				padding-bottom: 15px;
			}
			// these need their dropdowns to go to the left bc the get cut off on the edge of the browser
			&:nth-last-of-type(-n + 3) {
				> ul.sub-menu {
					@include mq(small_laptop) {
						left: auto;
						right: -5px;
					}
					> li {
						> ul.sub-menu {
							right: auto;
							top: -29px;
							left: -277px;
						}
					}
				}
			}
			> a {
				margin-bottom: 27px;
				@include mq(small_laptop) {
					margin-bottom: 0;
				}
			}
		}
	}
}

nav {
	ul.sub-menu {
		box-shadow: 0px 3px 6px #00000029;
		padding: 0px;
		margin-bottom: 0px;
		background: $grey;
		opacity: 0;
		visibility: hidden;
		max-height: 0px;
		transition: opacity 200ms cubic-bezier(0.17, 0.66, 0.34, 0.98),
			visibility 200ms cubic-bezier(0.17, 0.66, 0.34, 0.98),
			margin 800ms cubic-bezier(0.17, 0.66, 0.34, 0.98),
			padding 800ms cubic-bezier(0.17, 0.66, 0.34, 0.98);
		@include mq(small_laptop) {
			max-height: none;
			background: $white;
			padding: 30px 0px;
			width: 277px;
			@include abs(38px, null, null, -5px);
		}
		&.active {
			margin-bottom: 35px;
			padding: 30px 0;
			opacity: 1;
			visibility: visible;
			max-height: 3000px;
			@include mq(small_tablet) {
				padding: 35px 0;
			}
		}
		li {
			font-size: 16px;
			font-weight: 900;
			text-transform: capitalize;
			@include mq(small_laptop) {
				font-size: 15px;
			}
			&.ilawyer-view-all {
				text-transform: uppercase;
			}
			&:last-of-type {
				a {
					margin-bottom: 0;
				}
			}
			a {
				margin-bottom: 15px;
				padding: 0 40px;
			}
		}
		> li ul.sub-menu {
			background: #35404b;
			margin-top: 0px;
			@include mq(small_laptop) {
				background: $white;
				top: -28px;
				left: auto;
				right: -277px;
			}
			&.active {
				margin-top: 29px;
			}
		}
	}
}
